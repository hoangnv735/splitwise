(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7481:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var a=s(2115);let r=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},d=[],o={toasts:[]};function c(e){o=i(o,e),d.forEach(e=>{e(o)})}function m(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||a()}}}),{id:s,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=a.useState(o);return a.useEffect(()=>(d.push(t),()=>{let e=d.indexOf(t);e>-1&&d.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7683:(e,t,s)=>{Promise.resolve().then(s.bind(s,9792))},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2596),r=s(9688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},9792:(e,t,s)=>{"use strict";s.d(t,{default:()=>e9});var a=s(5155),r=s(2115),l=s(9114);function n(){return(0,a.jsxs)("header",{className:"py-6 text-center border-b border-border/50 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,a.jsx)(l.A,{className:"h-10 w-10 text-primary"}),(0,a.jsx)("h1",{className:"text-4xl font-bold text-foreground tracking-tight",children:"Splitwise"})]}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2 text-lg",children:"Easily split expenses for your group activities."})]})}var i=s(9434);let d=r.forwardRef((e,t)=>{let{className:s,type:r,...l}=e;return(0,a.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});d.displayName="Input";var o=s(9708),c=s(2085);let m=(0,c.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=r.forwardRef((e,t)=>{let{className:s,variant:r,size:l,asChild:n=!1,...d}=e,c=n?o.DX:"button";return(0,a.jsx)(c,{className:(0,i.cn)(m({variant:r,size:l,className:s})),ref:t,...d})});u.displayName="Button";let p=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...r})});p.displayName="Card";let x=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...r})});x.displayName="CardHeader";let h=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...r})});h.displayName="CardTitle";let f=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});f.displayName="CardDescription";let j=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...r})});j.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter";var g=s(286),v=s(3896),N=s(5318);let y=(0,c.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function b(e){let{className:t,variant:s,...r}=e;return(0,a.jsx)("div",{className:(0,i.cn)(y({variant:s}),t),...r})}var w=s(7481);function A(e){let{attendees:t,onAttendeesChange:s}=e,[l,n]=(0,r.useState)(""),{toast:i}=(0,w.dj)(),o=e=>{s(t.filter(t=>t!==e))};return(0,a.jsxs)(p,{className:"shadow-lg",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(h,{className:"flex items-center text-2xl",children:[(0,a.jsx)(g.A,{className:"mr-2 h-6 w-6 text-primary"}),"Attendees"]}),(0,a.jsx)(f,{children:"Add participants. You can enter multiple names separated by commas."})]}),(0,a.jsxs)(j,{children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let a=l.split(",").map(e=>e.trim()).filter(e=>""!==e);if(0===a.length){i({title:"No Names Entered",description:"Please enter attendee names.",variant:"destructive"});return}let r=a.filter(e=>!t.includes(e));r.length>0?(s([...t,...r]),n(""),i({title:"Attendees Added",description:"".concat(r.join(", ")," added.")})):a.length>0&&(i({title:"Attendees Already Present",description:"All entered names are already in the attendee list.",variant:"default"}),n(""))},className:"flex gap-2 mb-4",children:[(0,a.jsx)(d,{type:"text",value:l,onChange:e=>n(e.target.value),placeholder:"Enter names, separated by commas",className:"flex-grow","aria-label":"New attendee names (comma-separated)"}),(0,a.jsxs)(u,{type:"submit",variant:"outline",children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"})," Add Attendees"]})]}),t.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"Current Attendees:"}),(0,a.jsx)("ul",{className:"flex flex-wrap gap-2",children:t.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)(b,{variant:"secondary",className:"text-sm py-1 px-3 rounded-full flex items-center",children:[e,(0,a.jsx)(u,{variant:"ghost",size:"icon",className:"ml-2 h-5 w-5 hover:bg-destructive/20 hover:text-destructive",onClick:()=>o(e),"aria-label":"Remove ".concat(e),children:(0,a.jsx)(N.A,{className:"h-3 w-3"})})]})},e))})]}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No attendees added yet. Add some to get started!"})]})]})}var C=s(6981),E=s(518);let S=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(C.bL,{ref:t,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...r,children:(0,a.jsx)(C.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(E.A,{className:"h-4 w-4"})})})});S.displayName=C.bL.displayName;var F=s(7655);let k=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(F.bL,{ref:t,className:(0,i.cn)("relative overflow-hidden",s),...l,children:[(0,a.jsx)(F.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,a.jsx)(G,{}),(0,a.jsx)(F.OK,{})]})});k.displayName=F.bL.displayName;let G=r.forwardRef((e,t)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,a.jsx)(F.VM,{ref:t,orientation:r,className:(0,i.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,a.jsx)(F.lr,{className:"relative flex-1 rounded-full bg-border"})})});G.displayName=F.VM.displayName;var D=s(968);let R=(0,c.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),T=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(D.b,{ref:t,className:(0,i.cn)(R(),s),...r})});T.displayName=D.b.displayName;var V=s(5943),I=s(4301),P=s(3223),B=s(8061),L=s(4371),O=s(594),M=s(7223),U=s(4520);let z=U.bL,_=U.l9,J=U.ZL,Y=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.hJ,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});Y.displayName=U.hJ.displayName;let $=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(J,{children:[(0,a.jsx)(Y,{}),(0,a.jsx)(U.UC,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});$.displayName=U.UC.displayName;let q=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};q.displayName="AlertDialogHeader";let H=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};H.displayName="AlertDialogFooter";let Z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold",s),...r})});Z.displayName=U.hE.displayName;let X=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})});X.displayName=U.VY.displayName;let K=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.rc,{ref:t,className:(0,i.cn)(m(),s),...r})});K.displayName=U.rc.displayName;let W=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(U.ZD,{ref:t,className:(0,i.cn)(m({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});W.displayName=U.ZD.displayName;var Q=s(9613);let ee=Q.Kq,et=Q.bL,es=Q.l9,ea=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...l}=e;return(0,a.jsx)(Q.UC,{ref:t,sideOffset:r,className:(0,i.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...l})});function er(e){let{attendees:t,groups:s,onAddGroup:l,onUpdateGroup:n,onDeleteGroup:i,onEditGroup:o,groupToEdit:c,onCancelEdit:m,reservedGroupName:v}=e,[N,y]=(0,r.useState)(""),[A,C]=(0,r.useState)([]),{toast:E}=(0,w.dj)(),F=!!c;(0,r.useEffect)(()=>{C(e=>e.filter(e=>t.includes(e)))},[t]),(0,r.useEffect)(()=>{F&&c?(y(c.name),C(c.members.filter(e=>t.includes(e)))):(y(""),C([]))},[F,c,t]);let G=e=>{C(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},D=s.filter(e=>!e.isSystemGroup||"system-all-attendees"!==e.id||t.length>0);return(0,a.jsxs)(p,{className:"shadow-lg",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(h,{className:"flex items-center text-2xl",children:[(0,a.jsx)(g.A,{className:"mr-2 h-6 w-6 text-primary"}),"Manage Attendee Groups"]}),(0,a.jsxs)(f,{children:["Create or edit groups. '",v,"' includes all current attendees."]})]}),(0,a.jsxs)(j,{className:"space-y-6",children:[(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=N.trim();if(!t){E({title:"Group Name Required",description:"Please enter a name for the group.",variant:"destructive"});return}if(v&&t.toLowerCase()===v.toLowerCase()&&(!F||(null==c?void 0:c.name.toLowerCase())!==v.toLowerCase())){E({title:"Reserved Name",description:'"'.concat(v,'" is a reserved group name. Please choose another.'),variant:"destructive"});return}if(s.find(e=>!e.isSystemGroup&&e.name.toLowerCase()===t.toLowerCase()&&(!F||e.id!==(null==c?void 0:c.id)))){E({title:"Group Name Exists",description:"A group with this name already exists. Please choose a different name.",variant:"destructive"});return}if(0===A.length){E({title:"No Members Selected",description:"Please select at least one member for the group.",variant:"destructive"});return}F&&c?n({...c,name:t,members:A}):l(t,A)},className:"space-y-4 p-4 border rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[F?(0,a.jsx)(V.A,{className:"mr-2 h-5 w-5 text-accent"}):(0,a.jsx)(I.A,{className:"mr-2 h-5 w-5 text-accent"}),F?"Edit Group: ".concat(null==c?void 0:c.name):"Create New Group"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[" ",(0,a.jsx)(T,{htmlFor:"groupName",className:"block mb-1",children:"Group Name"}),(0,a.jsx)(d,{id:"groupName",type:"text",value:N,onChange:e=>y(e.target.value),placeholder:"e.g., Core Team, Lunch Buddies",disabled:0===t.length&&!F})]}),(0,a.jsxs)("div",{children:[" ",(0,a.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,a.jsx)(T,{children:"Select Members"}),t.length>0&&(0,a.jsxs)("div",{className:"space-x-1",children:[(0,a.jsxs)(u,{type:"button",variant:"outline",size:"sm",onClick:()=>{C([...t])},disabled:0===t.length,children:[(0,a.jsx)(P.A,{className:"mr-1 h-3 w-3"})," All"]}),(0,a.jsxs)(u,{type:"button",variant:"outline",size:"sm",onClick:()=>{C([])},disabled:0===t.length||0===A.length,children:[(0,a.jsx)(B.A,{className:"mr-1 h-3 w-3"})," None"]})]})]}),t.length>0?(0,a.jsx)(k,{className:"h-32 mt-1 rounded-md border p-2",children:t.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-1",children:[(0,a.jsx)(S,{id:"member-".concat(e,"-").concat((null==c?void 0:c.id)||"new"),checked:A.includes(e),onCheckedChange:()=>G(e),"aria-label":"Select ".concat(e)}),(0,a.jsx)(T,{htmlFor:"member-".concat(e,"-").concat((null==c?void 0:c.id)||"new"),className:"font-normal",children:e})]},e))}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1 py-1",children:"Add attendees first to select members."})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 pt-2",children:[" ",(0,a.jsxs)(u,{type:"submit",disabled:!N.trim()||0===A.length&&!F&&t.length>0||0===t.length&&!F,className:"w-full sm:flex-1",children:[F?(0,a.jsx)(V.A,{className:"mr-2 h-4 w-4"}):(0,a.jsx)(I.A,{className:"mr-2 h-4 w-4"}),F?"Update Group":"Add Group"]}),F&&(0,a.jsxs)(u,{type:"button",variant:"outline",onClick:()=>{m(),E({title:"Edit Cancelled",variant:"default"})},className:"w-full sm:flex-1",children:[(0,a.jsx)(L.A,{className:"mr-2 h-4 w-4"})," Cancel Edit"]})]})]}),D.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Existing Groups"}),(0,a.jsx)(k,{className:"h-40 rounded-md border",children:(0,a.jsx)("ul",{className:"p-2 space-y-2",children:D.map(e=>(0,a.jsxs)("li",{className:"flex items-center justify-between p-3 rounded-md ".concat(e.isSystemGroup?"bg-primary/10 border border-primary/30":"bg-secondary/50"),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium flex items-center",children:[e.name,e.isSystemGroup&&(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{children:[(0,a.jsx)(es,{asChild:!0,children:(0,a.jsx)(O.A,{className:"ml-2 h-4 w-4 text-primary cursor-help"})}),(0,a.jsx)(ea,{children:(0,a.jsx)("p",{children:"This is a system-managed group representing all current attendees."})})]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 mt-1",children:[(e.isSystemGroup?t:e.members.filter(e=>t.includes(e))).map(t=>(0,a.jsx)(b,{variant:e.isSystemGroup?"default":"outline",className:"text-xs",children:t},t)),0===e.members.filter(e=>t.includes(e)).length&&!e.isSystemGroup&&(0,a.jsx)(b,{variant:"destructive",className:"text-xs",children:"No valid members"}),0===t.length&&e.isSystemGroup&&(0,a.jsx)(b,{variant:"outline",className:"text-xs",children:"No attendees yet"})]})]}),!e.isSystemGroup&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{children:[(0,a.jsx)(es,{asChild:!0,children:(0,a.jsx)(u,{variant:"ghost",size:"icon",className:"hover:bg-accent/20 hover:text-accent-foreground",onClick:()=>o(e.id),"aria-label":"Edit group ".concat(e.name),children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})}),(0,a.jsx)(ea,{children:(0,a.jsx)("p",{children:"Edit Group"})})]})}),(0,a.jsxs)(z,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{children:[(0,a.jsx)(es,{asChild:!0,children:(0,a.jsx)(_,{asChild:!0,children:(0,a.jsx)(u,{variant:"ghost",size:"icon",className:"hover:bg-destructive/20 hover:text-destructive","aria-label":"Delete group ".concat(e.name),children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})})}),(0,a.jsx)(ea,{children:(0,a.jsx)("p",{children:"Delete Group"})})]})}),(0,a.jsxs)($,{children:[(0,a.jsxs)(q,{children:[(0,a.jsx)(Z,{children:"Are you sure?"}),(0,a.jsxs)(X,{children:['This action cannot be undone. This will permanently delete the group: "',e.name,'".']})]}),(0,a.jsxs)(H,{children:[(0,a.jsx)(W,{children:"Cancel"}),(0,a.jsx)(K,{onClick:()=>{i(e.id)},className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Delete"})]})]})]})]})]},e.id))})})]}),0===s.filter(e=>!e.isSystemGroup).length&&t.length>0&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No custom groups created yet. Create one above!"}),0===t.length&&0===s.filter(e=>!e.isSystemGroup).length&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Add attendees to start managing groups."})]})]})}ea.displayName=Q.UC.displayName;var el=s(221),en=s(2177),ei=s(5594);let ed=en.Op,eo=r.createContext({}),ec=e=>{let{...t}=e;return(0,a.jsx)(eo.Provider,{value:{name:t.name},children:(0,a.jsx)(en.xI,{...t})})},em=()=>{let e=r.useContext(eo),t=r.useContext(eu),{getFieldState:s,formState:a}=(0,en.xW)(),l=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...l}},eu=r.createContext({}),ep=r.forwardRef((e,t)=>{let{className:s,...l}=e,n=r.useId();return(0,a.jsx)(eu.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",s),...l})})});ep.displayName="FormItem";let ex=r.forwardRef((e,t)=>{let{className:s,...r}=e,{error:l,formItemId:n}=em();return(0,a.jsx)(T,{ref:t,className:(0,i.cn)(l&&"text-destructive",s),htmlFor:n,...r})});ex.displayName="FormLabel";let eh=r.forwardRef((e,t)=>{let{...s}=e,{error:r,formItemId:l,formDescriptionId:n,formMessageId:i}=em();return(0,a.jsx)(o.DX,{ref:t,id:l,"aria-describedby":r?"".concat(n," ").concat(i):"".concat(n),"aria-invalid":!!r,...s})});eh.displayName="FormControl",r.forwardRef((e,t)=>{let{className:s,...r}=e,{formDescriptionId:l}=em();return(0,a.jsx)("p",{ref:t,id:l,className:(0,i.cn)("text-sm text-muted-foreground",s),...r})}).displayName="FormDescription";let ef=r.forwardRef((e,t)=>{var s;let{className:r,children:l,...n}=e,{error:d,formMessageId:o}=em(),c=d?String(null!==(s=null==d?void 0:d.message)&&void 0!==s?s:""):l;return c?(0,a.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-sm font-medium text-destructive",r),...n,children:c}):null});ef.displayName="FormMessage";var ej=s(1992),eg=s(9556),ev=s(7381);let eN=ej.bL;ej.YJ;let ey=ej.WT,eb=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(ej.l9,{ref:t,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[r,(0,a.jsx)(ej.In,{asChild:!0,children:(0,a.jsx)(eg.A,{className:"h-4 w-4 opacity-50"})})]})});eb.displayName=ej.l9.displayName;let ew=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ej.PP,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(ev.A,{className:"h-4 w-4"})})});ew.displayName=ej.PP.displayName;let eA=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ej.wn,{ref:t,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",s),...r,children:(0,a.jsx)(eg.A,{className:"h-4 w-4"})})});eA.displayName=ej.wn.displayName;let eC=r.forwardRef((e,t)=>{let{className:s,children:r,position:l="popper",...n}=e;return(0,a.jsx)(ej.ZL,{children:(0,a.jsxs)(ej.UC,{ref:t,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,a.jsx)(ew,{}),(0,a.jsx)(ej.LM,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(eA,{})]})})});eC.displayName=ej.UC.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ej.JU,{ref:t,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...r})}).displayName=ej.JU.displayName;let eE=r.forwardRef((e,t)=>{let{className:s,children:r,...l}=e;return(0,a.jsxs)(ej.q7,{ref:t,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(ej.VF,{children:(0,a.jsx)(E.A,{className:"h-4 w-4"})})}),(0,a.jsx)(ej.p4,{children:r})]})});eE.displayName=ej.q7.displayName,r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(ej.wv,{ref:t,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",s),...r})}).displayName=ej.wv.displayName;var eS=s(8390),eF=s(9829),ek=s(8294),eG=s(9239),eD=s(1737);let eR=ei.Ik({description:ei.Yj().min(1,"Description is required."),amount:ei.au.number().positive("Amount must be positive."),paidBy:ei.Yj().min(1,"Payer is required."),participants:ei.YO(ei.Yj()).min(1,"At least one participant is required."),selectedGroupId:ei.Yj().optional()});function eT(e){let{attendees:t,groups:s,onAddExpense:l,onUpdateExpense:n,expenseToEdit:i,onCancelEdit:o}=e,{toast:c}=(0,w.dj)(),[m,v]=(0,r.useState)(""),N=(0,en.mN)({resolver:(0,el.u)(eR),defaultValues:{description:"",amount:0,paidBy:"",participants:t,selectedGroupId:void 0}}),y=N.watch("selectedGroupId"),b=!!i;return(0,r.useEffect)(()=>{if(b&&i){var e;N.reset({description:i.description,amount:i.amount,paidBy:i.paidBy,participants:i.participants,selectedGroupId:(null===(e=s.find(e=>e.members.length===i.participants.length&&e.members.every(e=>i.participants.includes(e))&&i.participants.every(t=>e.members.includes(t))))||void 0===e?void 0:e.id)||void 0}),v("")}else if(!b){let e=N.getValues("selectedGroupId");if(N.reset({description:"",amount:0,paidBy:"",participants:t,selectedGroupId:e}),e){let a=s.find(t=>t.id===e);if(a){let e=a.members.filter(e=>t.includes(e));N.setValue("participants",e,{shouldValidate:!1})}else N.setValue("participants",t,{shouldValidate:!1}),N.setValue("selectedGroupId",void 0)}else N.setValue("participants",t,{shouldValidate:!1})}},[b,i,N,s,t]),(0,r.useEffect)(()=>{if(b)return;let e=N.getValues("selectedGroupId");if(e){let a=s.find(t=>t.id===e);if(a){let e=a.members.filter(e=>t.includes(e));JSON.stringify(N.getValues("participants"))!==JSON.stringify(e)&&N.setValue("participants",e,{shouldValidate:!0})}else N.setValue("participants",t,{shouldValidate:!0}),N.setValue("selectedGroupId",void 0)}else JSON.stringify(N.getValues("participants"))!==JSON.stringify(t)&&N.setValue("participants",t,{shouldValidate:!0});let a=N.getValues("paidBy");a&&!t.includes(a)&&N.setValue("paidBy","",{shouldValidate:!0})},[t,s,N,y,b]),(0,a.jsxs)(p,{className:"shadow-lg",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(h,{className:"flex items-center text-2xl",children:[(0,a.jsx)(eS.A,{className:"mr-2 h-6 w-6 text-primary"}),b?"Edit Expense":"Add New Expense"]}),(0,a.jsx)(f,{children:b?"Update the details of this expense.":"Log a new expense and assign it."})]}),(0,a.jsx)(j,{children:(0,a.jsx)(ed,{...N,children:(0,a.jsxs)("form",{onSubmit:N.handleSubmit(function(e){b&&i?n({...e,id:i.id}):l({id:crypto.randomUUID(),...e}),v(""),c({title:b?"Expense Updated":"Expense Added",description:"".concat(e.description," for $").concat(e.amount.toFixed(2)," ").concat(b?"updated":"added"," successfully.")})}),className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3 mb-4 p-3 border rounded-lg bg-secondary/30",children:[(0,a.jsxs)(T,{htmlFor:"fastInput",className:"font-semibold flex items-center text-md",children:[(0,a.jsx)(eF.A,{className:"mr-2 h-5 w-5 text-accent"})," Fast Apply to Form"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d,{id:"fastInput",type:"text",value:m,onChange:e=>v(e.target.value),placeholder:"e.g., Food, 20, Alice [, GroupName]",className:"flex-grow","aria-label":"Fast expense entry: Description, Amount, Payer [, GroupName]",disabled:b}),(0,a.jsx)(u,{type:"button",onClick:()=>{if(!m.trim()){c({title:"Fast Entry Empty",description:"Please enter expense details.",variant:"destructive"});return}let e=m.split(",").map(e=>e.trim());if(e.length<3||e.length>4){c({title:"Invalid Fast Entry Format",description:"Expected: Desc, Amount, Payer OR Desc, Amount, Payer, GroupName",variant:"destructive"});return}let[a,r,l,n=""]=e,i=parseFloat(r);if(!a){c({title:"Invalid Fast Entry",description:"Description cannot be empty.",variant:"destructive"});return}if(isNaN(i)||i<=0){c({title:"Invalid Fast Entry",description:"Amount must be a positive number.",variant:"destructive"});return}if(!l){c({title:"Invalid Fast Entry",description:"Payer name cannot be empty.",variant:"destructive"});return}if(!t.includes(l)){c({title:"Invalid Fast Entry Payer",description:'Attendee "'.concat(l,'" not found. Ensure payer is in attendees list.'),variant:"destructive"});return}N.setValue("description",a,{shouldValidate:!0}),N.setValue("amount",i,{shouldValidate:!0}),N.setValue("paidBy",l,{shouldValidate:!0});let d="Description, Amount, and Payer fields updated.";if(4===e.length&&n){let e=s.find(e=>e.name.toLowerCase()===n.toLowerCase());if(e){let s=e.members.filter(e=>t.includes(e));N.setValue("participants",s,{shouldValidate:!0}),N.setValue("selectedGroupId",e.id,{shouldValidate:!0}),d+=' Participants set to group "'.concat(e.name,'".')}else c({title:"Group Not Found",description:'Group "'.concat(n,'" not found. Participants set to all attendees. Please verify.'),variant:"destructive"}),N.setValue("selectedGroupId",void 0),N.setValue("participants",t,{shouldValidate:!0})}else N.setValue("selectedGroupId",void 0),N.setValue("participants",t,{shouldValidate:!0});c({title:"Fast Entry Applied",description:d}),v("")},variant:"outline",size:"sm",disabled:b,children:"Apply"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:b?"Fast entry disabled while editing.":"Populates fields below. Then, review and submit."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(ec,{control:N.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(ep,{children:[(0,a.jsx)(ex,{children:"Description"}),(0,a.jsx)(eh,{children:(0,a.jsx)(d,{placeholder:"e.g., Snacks, Drinks, Tickets",...t})}),(0,a.jsx)(ef,{})]})}}),(0,a.jsx)(ec,{control:N.control,name:"amount",render:e=>{let{field:t}=e;return(0,a.jsxs)(ep,{children:[(0,a.jsx)(ex,{children:"Amount ($)"}),(0,a.jsx)(eh,{children:(0,a.jsx)(d,{type:"number",placeholder:"0.00",...t,step:"0.01"})}),(0,a.jsx)(ef,{})]})}})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(ec,{control:N.control,name:"paidBy",render:e=>{let{field:s}=e;return(0,a.jsxs)(ep,{children:[(0,a.jsxs)(ex,{className:"flex items-center",children:[(0,a.jsx)(ek.A,{className:"mr-1 h-4 w-4"}),"Paid By"]}),(0,a.jsxs)(eN,{onValueChange:s.onChange,value:s.value,disabled:0===t.length,children:[(0,a.jsx)(eh,{children:(0,a.jsx)(eb,{children:(0,a.jsx)(ey,{placeholder:"Select who paid"})})}),(0,a.jsx)(eC,{children:t.map(e=>(0,a.jsx)(eE,{value:e,children:e},e))})]}),0===t.length&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add attendees to select a payer."}),(0,a.jsx)(ef,{})]})}}),s.length>0&&t.length>0&&(0,a.jsx)(ec,{control:N.control,name:"selectedGroupId",render:e=>{let{field:r}=e;return(0,a.jsxs)(ep,{children:[(0,a.jsxs)(ex,{className:"flex items-center",children:[(0,a.jsx)(eG.A,{className:"mr-1 h-4 w-4"}),"Select Group (for Participants)"]}),(0,a.jsxs)(eN,{onValueChange:e=>{r.onChange("none"===e?void 0:e)},value:r.value||"none",children:[(0,a.jsx)(eh,{children:(0,a.jsx)(eb,{children:(0,a.jsx)(ey,{placeholder:"All Attendees / Custom"})})}),(0,a.jsxs)(eC,{children:[(0,a.jsx)(eE,{value:"none",children:"All Attendees / Custom"}),s.map(e=>(0,a.jsxs)(eE,{value:e.id,children:[e.name," (",e.isSystemGroup&&t.length>0?t.length:e.members.filter(e=>t.includes(e)).length," ",1!==e.members.filter(e=>t.includes(e)).length||e.isSystemGroup?"members":"member",")"]},e.id))]})]}),(0,a.jsx)(ef,{})]})}})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 mt-6",children:[(0,a.jsxs)(u,{type:"submit",className:"w-full sm:flex-1",disabled:0===t.length,children:[(0,a.jsx)(eD.A,{className:"mr-2 h-4 w-4"})," ",b?"Update Expense":"Add Expense"]}),b&&(0,a.jsxs)(u,{type:"button",variant:"outline",onClick:()=>{o(),c({title:"Edit Cancelled",variant:"default"})},className:"w-full sm:flex-1",children:[(0,a.jsx)(L.A,{className:"mr-2 h-4 w-4"})," Cancel Edit"]})]}),(0,a.jsx)("div",{className:"mt-4 space-y-2",children:(0,a.jsx)(ec,{control:N.control,name:"participants",render:()=>(0,a.jsxs)(ep,{children:[(0,a.jsxs)("div",{className:"mb-1",children:[(0,a.jsxs)(ex,{className:"text-base flex items-center",children:[(0,a.jsx)(g.A,{className:"mr-1 h-4 w-4"}),"Participants"]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Select who shared this expense. ",N.getValues("selectedGroupId")?"Adjust selection if needed.":b?"":"Defaults to all."]})]}),t.length>0?(0,a.jsx)(k,{className:"h-32 rounded-md border p-2",children:t.map(e=>(0,a.jsx)(ec,{control:N.control,name:"participants",render:t=>{var s;let{field:r}=t;return(0,a.jsxs)(ep,{className:"flex flex-row items-center space-x-2 space-y-0 py-1",children:[(0,a.jsx)(eh,{children:(0,a.jsx)(S,{checked:null===(s=r.value)||void 0===s?void 0:s.includes(e),onCheckedChange:t=>(N.getValues("selectedGroupId")&&N.setValue("selectedGroupId",void 0),t?r.onChange([...r.value||[],e]):r.onChange((r.value||[]).filter(t=>t!==e)))})}),(0,a.jsx)(ex,{className:"font-normal text-sm",children:e})]},e)}},e))}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground p-2 border rounded-md text-center",children:"Add attendees to select participants."}),(0,a.jsx)(ef,{})]})})})]})})})]})}let eV=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",s),...r})})});eV.displayName="Table";let eI=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",s),...r})});eI.displayName="TableHeader";let eP=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",s),...r})});eP.displayName="TableBody",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...r})}).displayName="TableFooter";let eB=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...r})});eB.displayName="TableRow";let eL=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...r})});eL.displayName="TableHead";let eO=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...r})});eO.displayName="TableCell",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",s),...r})}).displayName="TableCaption";var eM=s(5300),eU=s(8718),ez=s(4558);function e_(e){let{expenses:t,onDeleteExpense:s,onEditExpense:r}=e,{toast:l}=(0,w.dj)();return 0===t.length?(0,a.jsxs)(p,{className:"shadow-lg",children:[(0,a.jsxs)(x,{children:[(0,a.jsxs)(h,{className:"flex items-center text-2xl",children:[(0,a.jsx)(eM.A,{className:"mr-2 h-6 w-6 text-primary"}),"Expense Summary"]}),(0,a.jsx)(f,{children:"A detailed list of all logged expenses."})]}),(0,a.jsx)(j,{children:(0,a.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"No expenses logged yet. Add an expense using the form above."})})]}):(0,a.jsxs)(p,{className:"shadow-lg",children:[(0,a.jsxs)(x,{className:"flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(h,{className:"flex items-center text-2xl",children:[(0,a.jsx)(eM.A,{className:"mr-2 h-6 w-6 text-primary"}),"Expense Summary"]}),(0,a.jsx)(f,{children:"A detailed list of all logged expenses."})]}),(0,a.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>{if(0===t.length){l({title:"No Expenses to Export",description:"There are no expenses to export.",variant:"default"});return}let e=new Blob([["Description,Amount,Paid By,Participants,# Participants",...t.map(e=>{let t=e.participants.join("; ");return['"'.concat(e.description.replace(/"/g,'""'),'"'),e.amount.toFixed(2),'"'.concat(e.paidBy.replace(/"/g,'""'),'"'),'"'.concat(t.replace(/"/g,'""'),'"'),e.participants.length.toString()].join(",")})].join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){let t=URL.createObjectURL(e);s.setAttribute("href",t),s.setAttribute("download","splitwise_expenses.csv"),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),l({title:"Export Successful",description:"Expenses have been exported to splitwise_expenses.csv."})}else l({title:"Export Failed",description:"Your browser does not support automatic file downloads.",variant:"destructive"})},children:[(0,a.jsx)(eU.A,{className:"mr-2 h-4 w-4"}),"Export to CSV"]})]}),(0,a.jsx)(j,{children:(0,a.jsx)(k,{className:"h-[300px] w-full",children:(0,a.jsxs)(eV,{children:[(0,a.jsx)(eI,{children:(0,a.jsxs)(eB,{children:[(0,a.jsxs)(eL,{children:[(0,a.jsx)(eM.A,{className:"inline-block mr-1 h-4 w-4"}),"Description"]}),(0,a.jsxs)(eL,{className:"text-right",children:[(0,a.jsx)(eS.A,{className:"inline-block mr-1 h-4 w-4"}),"Amount"]}),(0,a.jsxs)(eL,{children:[(0,a.jsx)(ek.A,{className:"inline-block mr-1 h-4 w-4"}),"Paid By"]}),(0,a.jsxs)(eL,{children:[(0,a.jsx)(g.A,{className:"inline-block mr-1 h-4 w-4"}),"Participants"]}),(0,a.jsxs)(eL,{className:"text-center",children:[(0,a.jsx)(ez.A,{className:"inline-block mr-1 h-4 w-4"}),"# Participants"]}),(0,a.jsx)(eL,{className:"text-center",children:"Actions"})]})}),(0,a.jsx)(eP,{children:t.map(e=>(0,a.jsxs)(eB,{children:[(0,a.jsx)(eO,{className:"font-medium",children:e.description}),(0,a.jsxs)(eO,{className:"text-right",children:["$",e.amount.toFixed(2)]}),(0,a.jsx)(eO,{children:e.paidBy}),(0,a.jsx)(eO,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[e.participants.map(e=>(0,a.jsx)(b,{variant:"outline",className:"text-xs",children:e},e)),0===e.participants.length&&(0,a.jsx)(b,{variant:"destructive",className:"text-xs",children:"None"})]})}),(0,a.jsx)(eO,{className:"text-center",children:e.participants.length}),(0,a.jsx)(eO,{className:"text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{children:[(0,a.jsx)(es,{asChild:!0,children:(0,a.jsx)(u,{variant:"ghost",size:"icon",className:"hover:bg-accent/20 hover:text-accent-foreground",onClick:()=>r(e.id),"aria-label":"Edit expense ".concat(e.description),children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})}),(0,a.jsx)(ea,{children:(0,a.jsx)("p",{children:"Edit Expense"})})]})}),(0,a.jsxs)(z,{children:[(0,a.jsx)(ee,{children:(0,a.jsxs)(et,{children:[(0,a.jsx)(es,{asChild:!0,children:(0,a.jsx)(_,{asChild:!0,children:(0,a.jsx)(u,{variant:"ghost",size:"icon",className:"hover:bg-destructive/20 hover:text-destructive","aria-label":"Delete expense ".concat(e.description),children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})})}),(0,a.jsx)(ea,{children:(0,a.jsx)("p",{children:"Delete Expense"})})]})}),(0,a.jsxs)($,{children:[(0,a.jsxs)(q,{children:[(0,a.jsx)(Z,{children:"Are you sure?"}),(0,a.jsxs)(X,{children:['This action cannot be undone. This will permanently delete the expense: "',e.description,'".']})]}),(0,a.jsxs)(H,{children:[(0,a.jsx)(W,{children:"Cancel"}),(0,a.jsx)(K,{onClick:()=>{s(e.id),l({title:"Expense Deleted",description:'"'.concat(e.description,'" has been removed.')})},className:"bg-destructive hover:bg-destructive/90 text-destructive-foreground",children:"Delete"})]})]})]})]})})]},e.id))})]})})})]})}var eJ=s(9876),eY=s(478),e$=s(659),eq=s(7070),eH=s(9968);function eZ(e){let{settlements:t,balances:s}=e,{toast:r}=(0,w.dj)(),l=s.length>0||t.length>0,n=l&&0===t.length&&s.every(e=>.01>Math.abs(e.amount));return(0,a.jsxs)(p,{className:"shadow-lg",children:[(0,a.jsxs)(x,{className:"flex flex-row items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(h,{className:"flex items-center text-2xl",children:[(0,a.jsx)(eJ.A,{className:"mr-2 h-6 w-6 text-primary"}),"Settlement Summary"]}),(0,a.jsx)(f,{children:"Overview of balances and optimized payment transactions."})]}),(0,a.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>{if(!l&&!n){r({title:"No Data to Export",description:"Calculate balances first.",variant:"default"});return}let e="Splitwise Summary:\n\n";n?e+="\uD83C\uDF89 All expenses are perfectly settled!\n":(s.length>0&&(e+="--- Balances ---\n",s.forEach(t=>{e+="".concat(t.attendeeName,": ").concat(t.amount>=0?"is owed $".concat(Math.abs(t.amount).toFixed(2)):"owes $".concat(Math.abs(t.amount).toFixed(2)),"\n")}),e+="\n"),t.length>0?(e+="--- Payments ---\n",t.forEach(t=>{e+="".concat(t.from," pays ").concat(t.to," $").concat(t.amount.toFixed(2),"\n")})):s.length>0&&!n&&(e+="--- Payments ---\nNo transactions needed, but balances are not zero (likely due to rounding or very small amounts).\n")),navigator.clipboard.writeText(e).then(()=>{r({title:"Copied to Clipboard!",description:"Settlement summary text has been copied."})}).catch(e=>{console.error("Failed to copy text: ",e),r({title:"Copy Failed",description:"Could not copy to clipboard. Your browser might not support it or permissions are denied.",variant:"destructive"})})},disabled:!l&&!n,children:[(0,a.jsx)(eY.A,{className:"mr-2 h-4 w-4"}),"Export to Text"]})]}),(0,a.jsxs)(j,{className:"space-y-6",children:[!l&&!n&&(0,a.jsx)("p",{className:"text-muted-foreground text-center py-4",children:"Calculate balances to see the settlement summary."}),n&&(0,a.jsx)("p",{className:"text-center py-4 text-green-600 font-medium text-lg",children:"\uD83C\uDF89 All expenses are perfectly settled!"}),s.length>0&&!n&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[(0,a.jsx)(g.A,{className:"mr-2 h-5 w-5 text-accent"}),"Individual Balances"]}),(0,a.jsx)(k,{className:"h-[200px] w-full rounded-md border",children:(0,a.jsxs)(eV,{children:[(0,a.jsx)(eI,{children:(0,a.jsxs)(eB,{children:[(0,a.jsx)(eL,{children:"Attendee"}),(0,a.jsx)(eL,{className:"text-right",children:"Balance"})]})}),(0,a.jsx)(eP,{children:s.map(e=>(0,a.jsxs)(eB,{children:[(0,a.jsx)(eO,{children:e.attendeeName}),(0,a.jsxs)(eO,{className:"text-right font-medium ".concat(e.amount>=0?"text-green-600":"text-red-600"),children:[e.amount>=0?(0,a.jsx)(e$.A,{className:"inline-block mr-1 h-4 w-4"}):(0,a.jsx)(eq.A,{className:"inline-block mr-1 h-4 w-4"}),"$",Math.abs(e.amount).toFixed(2),e.amount>0&&" (is owed)",e.amount<0&&" (owes)"]})]},e.attendeeName))})]})})]}),t.length>0&&!n&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[(0,a.jsx)(eH.A,{className:"mr-2 h-5 w-5 text-accent"}),"Optimized Transactions"]}),(0,a.jsx)(k,{className:"h-[200px] w-full rounded-md border",children:(0,a.jsxs)(eV,{children:[(0,a.jsx)(eI,{children:(0,a.jsxs)(eB,{children:[(0,a.jsx)(eL,{children:"From"}),(0,a.jsx)(eL,{children:"To"}),(0,a.jsx)(eL,{className:"text-right",children:"Amount"})]})}),(0,a.jsx)(eP,{children:t.map((e,t)=>(0,a.jsxs)(eB,{children:[(0,a.jsx)(eO,{children:e.from}),(0,a.jsx)(eO,{children:e.to}),(0,a.jsxs)(eO,{className:"text-right",children:["$",e.amount.toFixed(2)]})]},t))})]})})]})]})]})}var eX=s(2333),eK=s(9119),eW=s(9329),eQ=s(8808),e0=s(2142),e2=s(3422);let e1="system-all-attendees",e4="All Attendees",e5=["Alice","Bob","Charlie","David","Eve"],e3=[{description:'Team Lunch at "The Grand Eatery"',amount:120,paidBy:"Alice",participants:["Alice","Bob","Charlie"]},{description:"Coffee & Pastries",amount:35.5,paidBy:"Bob",participants:["Alice","Bob","Charlie","David"]},{description:"Park Entrance Fee",amount:20,paidBy:"Charlie",participants:["Charlie","David","Eve"]},{description:"Shared Taxi Ride",amount:25,paidBy:"David",participants:["Alice","David","Eve"]},{description:"Activity Supplies",amount:45,paidBy:"Eve",participants:e5}];function e9(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[m,f]=(0,r.useState)([]),[g,v]=(0,r.useState)([]),[N,y]=(0,r.useState)(null),[b,C]=(0,r.useState)(null),[E,S]=(0,r.useState)("single"),{toast:F}=(0,w.dj)(),k=(0,r.useRef)(null),G=(0,r.useCallback)(e=>{t(e),l(t=>t.map(t=>({...t,members:t.members.filter(t=>e.includes(t))})).filter(e=>e.isSystemGroup||e.members.length>0)),c(t=>t.map(t=>({...t,paidBy:e.includes(t.paidBy)?t.paidBy:"",participants:t.participants.filter(t=>e.includes(t))})).filter(t=>""!==t.paidBy&&(t.participants.length>0||0===e.length))),v([]),f([]),y(null),C(null)},[]),D=(0,r.useCallback)((e,t)=>{if(e.toLowerCase()===e4.toLowerCase()){F({title:"Reserved Name",description:'"'.concat(e4,'" is a reserved name and cannot be used.'),variant:"destructive"});return}let s={id:crypto.randomUUID(),name:e,members:t,isSystemGroup:!1};l(e=>[...e,s]),F({title:"Group Added",description:'Group "'.concat(e,'" created successfully.')})},[F]),R=(0,r.useCallback)(e=>{l(t=>t.map(t=>t.id===e.id?e:t)),C(null),F({title:"Group Updated",description:'Group "'.concat(e.name,'" updated successfully.')})},[F]),V=(0,r.useCallback)(e=>{if(e===e1){F({title:"Cannot Delete",description:'The "'.concat(e4,'" group cannot be deleted.'),variant:"destructive"});return}l(t=>t.filter(t=>t.id!==e)),b===e&&C(null),F({title:"Group Deleted",description:"The attendee group has been removed."})},[F,b]),I=(0,r.useCallback)(e=>{c(t=>[...t,e]),v([]),f([])},[]),P=(0,r.useCallback)(e=>{c(t=>t.map(t=>t.id===e.id?e:t)),y(null),v([]),f([]),F({title:"Expense Updated",description:'Expense "'.concat(e.description,'" updated.')})},[F]),B=(0,r.useCallback)(e=>{c(t=>t.filter(t=>t.id!==e)),N===e&&y(null),v([]),f([])},[N]),L=(0,r.useMemo)(()=>({id:e1,name:e4,members:e,isSystemGroup:!0}),[e]),O=(0,r.useMemo)(()=>{let t=s.filter(t=>t.members.some(t=>e.includes(t)));return e.length>0?[L,...t]:[...t]},[L,s,e]),M=o.length>0&&e.length>0&&o.some(t=>t.participants.length>0&&e.includes(t.paidBy)),U=g.length>0||m.length>0||g.length>0&&0===m.length&&g.every(e=>.01>Math.abs(e.amount)),z=(0,r.useMemo)(()=>o.find(e=>e.id===N)||null,[o,N]),_=(0,r.useMemo)(()=>s.find(e=>e.id===b)||null,[s,b]),J=e=>{y(e),null!==e&&C(null)};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,a.jsx)(n,{}),(0,a.jsxs)("main",{className:"flex-grow container mx-auto px-4 py-8 space-y-8 max-w-6xl",children:[(0,a.jsxs)(p,{children:[(0,a.jsx)(x,{children:(0,a.jsxs)(h,{className:"flex items-center text-xl",children:[(0,a.jsx)(eX.A,{className:"mr-2 h-5 w-5 text-primary"}),"Project Data Management"]})}),(0,a.jsxs)(j,{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-end flex-wrap",children:[(0,a.jsxs)(u,{variant:"outline",onClick:()=>{let t=new Blob([JSON.stringify({version:1,attendees:e,userCreatedGroups:s,expenses:o},null,2)],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(t),a.download="splitwise_project.json",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href),F({title:"Project Saved",description:"Project data downloaded as splitwise_project.json."})},className:"w-full sm:w-auto",children:[(0,a.jsx)(eK.A,{className:"mr-2 h-4 w-4"}),"Save Project"]}),(0,a.jsxs)("div",{className:"flex flex-col items-start w-full sm:w-auto sm:flex-grow",children:[(0,a.jsx)(T,{htmlFor:"load-project-input",className:"mb-1 text-sm font-medium",children:"Load Project (JSON):"}),(0,a.jsx)(d,{id:"load-project-input",type:"file",accept:".json",onChange:e=>{var s;let a=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!a)return;let r=new FileReader;r.onload=e=>{try{var s;let a=null===(s=e.target)||void 0===s?void 0:s.result;if("string"!=typeof a)throw Error("File content is not a string.");let r=JSON.parse(a);if(!r||"object"!=typeof r||!Array.isArray(r.attendees)||!Array.isArray(r.userCreatedGroups)||!Array.isArray(r.expenses)||r.version&&"number"!=typeof r.version)throw Error("Invalid project file structure.");if(!r.attendees.every(e=>"string"==typeof e))throw Error("Invalid data within project file.");t(r.attendees),l(r.userCreatedGroups),c(r.expenses),v([]),f([]),y(null),C(null),F({title:"Project Loaded",description:"Project data loaded successfully."})}catch(t){console.error("Error loading project file:",t);let e="Failed to load project file.";t instanceof Error&&(e=t.message.includes("Invalid")?t.message:"File is not valid JSON or has incorrect structure."),F({title:"Load Error",description:e,variant:"destructive"})}finally{k.current&&(k.current.value="")}},r.readAsText(a)},ref:k,className:"w-full file:mr-2 file:py-1 file:px-2 file:rounded-full file:border-0 file:text-xs file:font-semibold file:bg-primary/10 file:text-primary hover:file:bg-primary/20"})]}),(0,a.jsxs)(u,{variant:"outline",onClick:()=>{t([]),l([]),c([]),v([]),f([]),y(null),C(null),setTimeout(()=>{t(e5),c(e3.map(e=>({...e,id:crypto.randomUUID()}))),F({title:"Demo Data Loaded",description:"Sample attendees and expenses have been added."})},0)},size:"sm",className:"w-full sm:w-auto",children:[(0,a.jsx)(eW.A,{className:"mr-2 h-4 w-4"}),"Load Demo"]}),(0,a.jsxs)(u,{variant:"outline",onClick:()=>{S(e=>{let t="dual"===e?"single":"dual";return F({title:"Layout Changed",description:"Switched to ".concat(t,"-column layout.")}),t})},size:"sm",className:"w-full sm:w-auto",children:["dual"===E?(0,a.jsx)(eQ.A,{className:"mr-2 h-4 w-4"}):(0,a.jsx)(e0.A,{className:"mr-2 h-4 w-4"}),"dual"===E?"Single-Column":"Dual-Column"," View"]})]})]}),(0,a.jsxs)("div",{className:(0,i.cn)("grid gap-8 items-start","dual"===E?"grid-cols-1 md:grid-cols-2":"grid-cols-1"),children:[(0,a.jsx)(A,{attendees:e,onAttendeesChange:G}),(0,a.jsx)(er,{attendees:e,groups:O,onAddGroup:D,onUpdateGroup:R,onDeleteGroup:V,onEditGroup:e=>{C(e),null!==e&&y(null)},groupToEdit:_,onCancelEdit:()=>C(null),reservedGroupName:e4})]}),(0,a.jsxs)("div",{className:(0,i.cn)("grid gap-8 items-start","dual"===E?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"),children:[(0,a.jsx)("div",{children:(0,a.jsx)(eT,{attendees:e,groups:O,onAddExpense:I,onUpdateExpense:P,expenseToEdit:z,onCancelEdit:()=>J(null)})}),o.length>0&&(0,a.jsx)("div",{children:(0,a.jsx)(e_,{expenses:o,onDeleteExpense:B,onEditExpense:J})})]}),(e.length>0||o.length>0)&&(0,a.jsx)(p,{className:"shadow-lg",children:(0,a.jsx)(j,{className:"pt-6",children:(0,a.jsxs)(u,{onClick:()=>{if(0===e.length&&o.length>0){F({title:"Cannot Calculate",description:"There are expenses but no attendees. Please add attendees or remove invalid expenses.",variant:"destructive"}),v([]),f([]);return}if(0===o.length){F({title:"No Expenses to Calculate",description:"There are no expenses to calculate. Add some first!",variant:"default"}),e.length>0?v(e.map(e=>({attendeeName:e,amount:0}))):v([]),f([]);return}if(0===e.length&&0===o.length){F({title:"Nothing to Calculate",description:"Please add attendees and expenses.",variant:"default"});return}let t=o.filter(t=>t.participants.length>0&&e.includes(t.paidBy));if(0===t.length&&o.length>0){F({title:"Invalid Expenses for Calculation",description:"None of the current expenses have valid participants or payers from the current attendee list. Please check your expenses or attendees.",variant:"destructive"}),v([]),f([]);return}if(0===t.length&&0===o.length){F({title:"No Valid Expenses",description:"No valid expenses to calculate with the current attendees.",variant:"default"}),v([]),f([]);return}let s=function(e,t){let s=new Map;e.forEach(e=>{s.set(e,0)}),t.forEach(e=>{let t=s.get(e.paidBy)||0;if(s.set(e.paidBy,t+e.amount),e.participants.length>0){let t=e.amount/e.participants.length;e.participants.forEach(e=>{s.has(e)||s.set(e,0);let a=s.get(e)||0;s.set(e,a-t)})}});let a=[];return s.forEach((e,t)=>{a.push({attendeeName:t,amount:e})}),a}(e,t);v(s);let a=function(e){let t=new Map;function s(e,s,a){t.has(e)||t.set(e,new Map);let r=parseFloat(a.toFixed(2));r<.01?(t.get(e).delete(s),0===t.get(e).size&&t.delete(e)):t.get(e).set(s,r)}function a(e,a,r){var l,n;if(e===a)return;let i=parseFloat(r.toFixed(2));if(i<.01&&0!==r)return;let d=(null===(l=t.get(a))||void 0===l?void 0:l.get(e))||0;if(d>0&&(d>=i?(s(a,e,d-i),i=0):(s(a,e,0),i=parseFloat((i-d).toFixed(2)))),i>=.01||0===r&&0===d){let r=(null===(n=t.get(e))||void 0===n?void 0:n.get(a))||0;s(e,a,r+i)}else 0===i&&0!==r&&s(e,a,0)}e.forEach(e=>{a(e.from,e.to,e.amount)});let r=new Map;for(let t of(e.forEach(e=>{e.amount<.01||(r.has(e.from)||r.set(e.from,[]),r.get(e.from).push({to:e.to,amount:e.amount}))}),Array.from(r.keys()).filter(e=>{let t=r.get(e);return t&&t.length>1}))){let e=r.get(t);if(e.length<=1)continue;let s=e[0].to,l=0;for(let r of(e.forEach(e=>{l+=e.amount,a(t,e.to,-e.amount)}),(l=parseFloat(l.toFixed(2)))>=.01&&a(t,s,l),e))r.to!==s&&r.amount>=.01&&a(s,r.to,r.amount)}let l=[];return t.forEach((e,t)=>{e.forEach((e,s)=>{e>=.01&&l.push({from:t,to:s,amount:e})})}),l}(function(e){let t=[],s=e.map(e=>({...e,amount:parseFloat(e.amount.toFixed(2))})).filter(e=>Math.abs(e.amount)>=.01),a=s.filter(e=>e.amount<0).map(e=>({...e,amount:-e.amount})).sort((e,t)=>t.amount-e.amount),r=s.filter(e=>e.amount>0).sort((e,t)=>t.amount-e.amount),l=0,n=0;for(;l<a.length&&n<r.length;){let e=a[l],s=r[n],i=Math.min(e.amount,s.amount);i>=.01&&(t.push({from:e.attendeeName,to:s.attendeeName,amount:parseFloat(i.toFixed(2))}),e.amount=parseFloat((e.amount-i).toFixed(2)),s.amount=parseFloat((s.amount-i).toFixed(2))),e.amount<.01&&l++,s.amount<.01&&n++}return t}(s));f(a),s.length>0||a.length>0?F({title:"Calculation Complete",description:"Balances and settlements have been updated."}):t.length>0&&s.every(e=>.01>Math.abs(e.amount))?F({title:"Calculation Complete",description:"All expenses are perfectly settled among attendees!",variant:"default"}):0===t.length&&F({title:"No Valid Expenses for Calculation",description:"No expenses could be used for calculation with the current attendees.",variant:"default"})},className:"w-full text-lg py-6",size:"lg",disabled:!M&&!(0===o.length&&e.length>0),children:[(0,a.jsx)(e2.A,{className:"mr-2 h-5 w-5"})," Calculate Balances & Settle Up"]})})}),U&&(0,a.jsx)(eZ,{settlements:m,balances:g})]}),(0,a.jsxs)("footer",{className:"text-center py-4 mt-auto text-sm text-muted-foreground border-t",children:["Splitwise App \xa9 ",new Date().getFullYear()]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[774,705,441,684,358],()=>t(7683)),_N_E=e.O()}]);